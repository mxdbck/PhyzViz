<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bevy Applets</title>
  <meta name="color-scheme" content="light dark" />
  <style>
    :root {
      --bg: #0b0c10;
      --card: #121318;
      --fg: #e8eaf0;
      --muted: #a8adbb;
      --accent: #66fcf1;
      --accent-2: #45a29e;
      --ring: rgba(102,252,241,.25);
    }
    @media (prefers-color-scheme: light) {
      :root { --bg:#f6f7fb; --card:#ffffff; --fg:#0f1222; --muted:#5a6173; --accent:#006a67; --accent-2:#108a86; --ring:rgba(16,138,134,.18); }
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Noto Sans", Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 20% -10%, rgba(102,252,241,.08), transparent 60%),
                  radial-gradient(1000px 600px at 120% 10%, rgba(69,162,158,.08), transparent 60%),
                  var(--bg);
      color: var(--fg);
    }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 40px 20px 80px; }
    header { margin-bottom: 24px; }
    h1 { margin: 0; font-size: clamp(28px, 2.8vw, 40px); letter-spacing: .3px; }
    .sub { color: var(--muted); margin-top: 6px; }
    .toolbar { margin: 18px 0 10px; display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
    .search {
      flex: 1 1 260px; position: relative;
    }
    .search input {
      width: 100%; padding: 12px 14px; border-radius: 10px; border: 1px solid transparent; background: var(--card); color: var(--fg);
      outline: none; box-shadow: 0 0 0 4px transparent; transition: box-shadow .15s ease, border-color .15s ease;
    }
    .search input:focus { border-color: var(--accent-2); box-shadow: 0 0 0 6px var(--ring); }
    .grid {
      display: grid; gap: 14px;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      margin-top: 8px;
    }
    .card {
      display: block; padding: 16px 16px 14px; border-radius: 14px; background: linear-gradient(180deg, rgba(255,255,255,.02), transparent 40%), var(--card);
      text-decoration: none; color: inherit; border: 1px solid rgba(255,255,255,.06);
      outline: none; transition: transform .08s ease, box-shadow .15s ease, border-color .15s ease;
    }
    .card:hover { transform: translateY(-1px); border-color: rgba(102,252,241,.25); box-shadow: 0 10px 24px rgba(0,0,0,.18); }
    .card:focus-visible { box-shadow: 0 0 0 6px var(--ring); border-color: var(--accent-2); }
    .card .title { font-weight: 600; letter-spacing: .2px; }
    .card .desc { margin-top: 6px; font-size: 14px; color: var(--muted); min-height: 2.2em; }
    .card .chip {
      display: inline-block; margin-top: 10px; font-size: 12px; padding: 4px 8px; border-radius: 999px; color: var(--accent); border: 1px solid rgba(102,252,241,.35);
      background: linear-gradient(180deg, rgba(102,252,241,.08), transparent 60%);
    }
    footer { margin-top: 36px; color: var(--muted); font-size: 13px; }
    .empty { color: var(--muted); padding: 18px; border: 1px dashed rgba(255,255,255,.15); border-radius: 12px; background: var(--card); }
    .sr { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border-width: 0; }
  </style>

  <script>
    // ✏️ List your applets here. Each entry is { title, href, description? }.
    // The href should point to the page that RUNS the applet (usually an applet-specific index.html
    // generated by wasm-bindgen/Trunk/etc. inside build/wasm/<applet>/index.html).
    // If you only have raw .wasm files, the link will download the file.
    const APPLETS = [
      // Examples — replace with your real applets
      { title: "Simple Pendulum", href: "wasm/pendulum/index.html", description: "RK4 + Bevy 2D + bloom" },
      { title: "Double Pendulum", href: "wasm/double-pendulum/index.html", description: "RK4 + Bevy 2D + bloom" },
      { title: "Basic Pendulum", href: "wasm/basic-pendulum/index.html", description: "Bevy 2D" },
      { title: "Basic Double Pendulum", href: "wasm/basic-double-pendulum/index.html", description: "Bevy 2D" },


    //   { title: "Lorenz Attractor", href: "wasm/lorenz/index.html", description: "Chaotic system visualization" },
    //   { title: "Boids", href: "wasm/boids/index.html", description: "Flocking simulation" },
    ];
  </script>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Bevy Applets</h1>
      <div class="sub">A tiny collection of WebAssembly simulations. Each opens on its own minimal page.</div>
    </header>

    <div class="toolbar">
      <label class="search">
        <span class="sr">Search applets</span>
        <input id="q" type="search" placeholder="Search applets…" autocomplete="off" />
      </label>
    </div>

    <div id="grid" class="grid" role="list"></div>

    <footer>
      Deployed from <code>build/</code>. Applets live under <code>build/wasm/</code>.
    </footer>
  </div>

  <script>
    const grid = document.getElementById('grid');
    const q = document.getElementById('q');

    function render(list) {
      grid.innerHTML = '';
      if (!list.length) {
        grid.innerHTML = `<div class="empty">No applets match your search.</div>`;
        return;
      }
      for (const item of list) {
        const a = document.createElement('a');
        a.className = 'card';
        a.href = item.href;
        a.role = 'listitem';
        a.innerHTML = `
          <div class="title">${escapeHtml(item.title)}</div>
          <div class="desc">${escapeHtml(item.description || '')}</div>
          <div class="chip">WASM</div>
        `;
        grid.appendChild(a);
      }
    }

    function escapeHtml(str) {
      return String(str).replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[s]));
    }

    function filter() {
      const term = q.value.trim().toLowerCase();
      if (!term) return render(APPLETS);
      render(APPLETS.filter(x =>
        x.title.toLowerCase().includes(term) ||
        (x.description && x.description.toLowerCase().includes(term))
      ));
    }

    q.addEventListener('input', filter);
    render(APPLETS);
  </script>
</body>
</html>
